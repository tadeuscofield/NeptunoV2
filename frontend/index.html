<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>NEPTUNO - Sistema Profissional de PDI | Acesso</title>
  <meta name="description" content="Sistema inteligente para Plano de Desativa√ß√£o de Instala√ß√µes offshore. Conforme ANP 817/2020, Machine Learning e LGPD compliant.">

  <link rel="icon" type="image/png" href="NEPTUNO_LOGO.png">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      overflow-x: hidden;
      background: linear-gradient(135deg, #0a1929 0%, #1a365d 50%, #2c5282 100%);
      min-height: 100vh;
    }

    /* Wave Animation */
    .wave {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 200%;
      height: 200px;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120"><path d="M0,50 Q300,0 600,50 T1200,50 L1200,120 L0,120 Z" fill="%23ffffff" opacity="0.05"/></svg>') repeat-x;
      animation: wave-animation 15s linear infinite;
      z-index: 1;
    }

    .wave:nth-child(2) {
      bottom: 10px;
      animation: wave-animation 10s linear infinite;
      opacity: 0.03;
    }

    @keyframes wave-animation {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }

    /* Floating Animation */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .float {
      animation: float 6s ease-in-out infinite;
    }

    /* Gradient Text */
    .gradient-text {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #ea580c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Tab Styling */
    .tab-btn {
      transition: all 0.3s ease;
    }

    .tab-btn.active {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      font-weight: 700;
    }
  </style>
</head>
<body>

  <div class="wave"></div>
  <div class="wave"></div>

  <div class="relative z-10 min-h-screen flex items-center justify-center py-12 px-4">
    <div class="max-w-2xl w-full">

      <!-- Logo and Title -->
      <div class="text-center mb-8">
        <div class="float mb-6">
          <img src="NEPTUNO_LOGO.png" alt="NEPTUNO" class="h-24 mx-auto filter brightness-0 invert drop-shadow-2xl">
        </div>
        <h1 class="text-4xl md:text-5xl font-black text-white mb-3">
          Sistema <span class="gradient-text">NEPTUNO</span>
        </h1>
        <p class="text-xl text-blue-100">
          Plano de Desativa√ß√£o de Instala√ß√µes | ANP 817/2020
        </p>
      </div>

      <!-- Main Card -->
      <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">

        <!-- Tabs -->
        <div class="flex border-b-4 border-gray-100">
          <button
            id="tabAccessCode"
            class="tab-btn active flex-1 py-5 px-6 text-lg font-bold bg-gradient-to-r from-yellow-500 to-orange-500 text-white transition">
            üîë Tenho C√≥digo
          </button>
          <button
            id="tabRequestCode"
            class="tab-btn flex-1 py-5 px-6 text-lg font-bold text-gray-600 hover:bg-gray-50 transition">
            üìß Solicitar C√≥digo
          </button>
        </div>

        <!-- Tab Content: Access Code -->
        <div id="contentAccessCode" class="p-10">
          <h2 class="text-3xl font-black text-gray-900 mb-3 text-center">
            Insira seu C√≥digo de Acesso
          </h2>
          <p class="text-gray-600 mb-8 text-center">
            Digite o c√≥digo que voc√™ recebeu por email
          </p>

          <form id="accessForm" class="space-y-6">
            <div>
              <label for="accessCode" class="block text-sm font-bold text-gray-700 mb-2">
                C√≥digo de Acesso *
              </label>
              <input
                type="text"
                id="accessCode"
                name="accessCode"
                required
                placeholder="NEPT-XXXXXX"
                class="w-full px-6 py-4 text-2xl text-center font-bold border-4 border-gray-300 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition uppercase"
                maxlength="11"
                pattern="NEPT-[A-Z0-9]{6}"
              >
              <p class="text-xs text-gray-500 mt-2 text-center">
                Formato: NEPT-XXXXXX (exemplo: NEPT-ABC123)
              </p>
            </div>

            <button
              type="submit"
              class="w-full bg-gradient-to-r from-yellow-500 via-orange-500 to-orange-600 text-white py-5 px-6 rounded-xl text-xl font-black hover:from-yellow-600 hover:to-orange-700 transition shadow-2xl transform hover:scale-105">
              üöÄ Acessar Sistema
            </button>
          </form>

          <!-- Access Error Message -->
          <div id="accessError" class="hidden mt-6 bg-red-100 border-4 border-red-500 text-red-900 p-6 rounded-xl">
            <p class="font-bold text-lg">‚ùå C√≥digo Inv√°lido</p>
            <p class="text-sm mt-1" id="accessErrorMsg"></p>
          </div>
        </div>

        <!-- Tab Content: Request Code -->
        <div id="contentRequestCode" class="hidden p-10">
          <h2 class="text-3xl font-black text-gray-900 mb-3 text-center">
            Solicitar C√≥digo de Trial
          </h2>
          <p class="text-gray-600 mb-8 text-center">
            Preencha o formul√°rio abaixo para receber seu c√≥digo de acesso gratuito
          </p>

          <form id="requestForm" class="space-y-6">
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="reqName" class="block text-sm font-bold text-gray-700 mb-2">
                  Nome Completo *
                </label>
                <input
                  type="text"
                  id="reqName"
                  required
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition"
                  placeholder="Jo√£o da Silva"
                >
              </div>

              <div>
                <label for="reqEmail" class="block text-sm font-bold text-gray-700 mb-2">
                  Email *
                </label>
                <input
                  type="email"
                  id="reqEmail"
                  required
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition"
                  placeholder="joao@empresa.com.br"
                >
              </div>
            </div>

            <div>
              <label for="reqCompany" class="block text-sm font-bold text-gray-700 mb-2">
                Empresa *
              </label>
              <input
                type="text"
                id="reqCompany"
                required
                class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition"
                placeholder="Nome da empresa"
              >
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label for="reqPosition" class="block text-sm font-bold text-gray-700 mb-2">
                  Cargo
                </label>
                <input
                  type="text"
                  id="reqPosition"
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition"
                  placeholder="Ex: Engenheiro"
                >
              </div>

              <div>
                <label for="reqPhone" class="block text-sm font-bold text-gray-700 mb-2">
                  Telefone
                </label>
                <input
                  type="tel"
                  id="reqPhone"
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition"
                  placeholder="(21) 99999-9999"
                >
              </div>
            </div>

            <div class="bg-blue-50 p-4 rounded-xl border-2 border-blue-200">
              <div class="flex items-start space-x-3">
                <input
                  type="checkbox"
                  id="reqLgpd"
                  required
                  class="mt-1 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                >
                <label for="reqLgpd" class="text-sm text-gray-700">
                  <span class="font-bold">Aceito os termos de uso e pol√≠tica de privacidade (LGPD)</span><br>
                  <span class="text-xs text-gray-500">
                    Seus dados ser√£o utilizados apenas para fornecer acesso ao sistema.
                  </span>
                </label>
              </div>
            </div>

            <button
              type="submit"
              class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-5 px-6 rounded-xl text-xl font-black hover:from-green-600 hover:to-green-700 transition shadow-2xl transform hover:scale-105">
              üìß Enviar Solicita√ß√£o
            </button>
          </form>

          <!-- Request Success Message -->
          <div id="requestSuccess" class="hidden mt-6 bg-green-100 border-4 border-green-500 text-green-900 p-6 rounded-xl">
            <div class="flex items-center space-x-2 mb-3">
              <span class="text-3xl">‚úÖ</span>
              <h3 class="text-2xl font-bold">C√≥digo Gerado com Sucesso!</h3>
            </div>
            <p class="text-sm mb-2">
              <strong>Verifique sua caixa de entrada</strong> - enviamos seu c√≥digo de acesso por email.
            </p>
            <p class="text-sm mb-3">
              N√£o esquece de verificar a pasta de <strong>SPAM</strong> caso n√£o encontre.
            </p>
            <p class="text-xs text-green-700 bg-green-50 p-2 rounded">
              üí° Seu trial de 72 horas come√ßa assim que voc√™ inserir o c√≥digo na aba "Tenho C√≥digo"
            </p>
          </div>

          <!-- Request Error Message -->
          <div id="requestError" class="hidden mt-6 bg-red-100 border-4 border-red-500 text-red-900 p-6 rounded-xl">
            <p class="font-bold text-lg">‚ùå Erro ao Enviar</p>
            <p class="text-sm mt-1" id="requestErrorMsg"></p>
          </div>
        </div>

      </div>

      <!-- Footer Info -->
      <div class="mt-8 text-center text-blue-200 text-sm space-y-2">
        <p>Sistema conforme ANP 817/2020 | Machine Learning | LGPD Compliant</p>
        <p class="flex items-center justify-center space-x-2">
          <span>Desenvolvido por</span>
          <span class="font-bold text-white">üë∑ Eng. Tadeu Santana</span>
          <a href="https://www.linkedin.com/in/tadeu-santana-037802a2/" target="_blank" class="text-yellow-400 hover:text-yellow-300 transition">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
            </svg>
          </a>
        </p>
      </div>

    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // Tab switching
    const tabAccessCode = document.getElementById('tabAccessCode');
    const tabRequestCode = document.getElementById('tabRequestCode');
    const contentAccessCode = document.getElementById('contentAccessCode');
    const contentRequestCode = document.getElementById('contentRequestCode');

    tabAccessCode.addEventListener('click', () => {
      tabAccessCode.classList.add('active', 'bg-gradient-to-r', 'from-yellow-500', 'to-orange-500', 'text-white');
      tabAccessCode.classList.remove('text-gray-600', 'hover:bg-gray-50');
      tabRequestCode.classList.remove('active', 'bg-gradient-to-r', 'from-yellow-500', 'to-orange-500', 'text-white');
      tabRequestCode.classList.add('text-gray-600', 'hover:bg-gray-50');
      contentAccessCode.classList.remove('hidden');
      contentRequestCode.classList.add('hidden');
    });

    tabRequestCode.addEventListener('click', () => {
      tabRequestCode.classList.add('active', 'bg-gradient-to-r', 'from-yellow-500', 'to-orange-500', 'text-white');
      tabRequestCode.classList.remove('text-gray-600', 'hover:bg-gray-50');
      tabAccessCode.classList.remove('active', 'bg-gradient-to-r', 'from-yellow-500', 'to-orange-500', 'text-white');
      tabAccessCode.classList.add('text-gray-600', 'hover:bg-gray-50');
      contentRequestCode.classList.remove('hidden');
      contentAccessCode.classList.add('hidden');
    });

    // Access Code Form Handler
    document.getElementById('accessForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const accessCode = document.getElementById('accessCode').value.trim().toUpperCase();
      const errorDiv = document.getElementById('accessError');
      const errorMsg = document.getElementById('accessErrorMsg');

      // Hide previous errors
      errorDiv.classList.add('hidden');

      // Validate format
      if (!/^NEPT-[A-Z0-9]{6}$/.test(accessCode)) {
        errorMsg.textContent = 'Formato inv√°lido. Use: NEPT-XXXXXX (exemplo: NEPT-ABC123)';
        errorDiv.classList.remove('hidden');
        return;
      }

      // Redirect to /app with code as query parameter
      window.location.href = `/app?code=${accessCode}`;
    });

    // Request Code Form Handler - AUTOMATIC VIA RAILWAY API
    document.getElementById('requestForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const formData = {
        name: document.getElementById('reqName').value,
        email: document.getElementById('reqEmail').value,
        company: document.getElementById('reqCompany').value,
        position: document.getElementById('reqPosition').value || '',
        phone: document.getElementById('reqPhone').value || '',
        lgpd: document.getElementById('reqLgpd').checked
      };

      const successDiv = document.getElementById('requestSuccess');
      const errorDiv = document.getElementById('requestError');
      const errorMsg = document.getElementById('requestErrorMsg');
      const submitBtn = e.target.querySelector('button[type="submit"]');

      // Hide previous messages
      successDiv.classList.add('hidden');
      errorDiv.classList.add('hidden');

      // Disable button and show loading
      submitBtn.disabled = true;
      submitBtn.innerHTML = '‚è≥ Gerando c√≥digo...';

      try {
        // Call Railway API to generate trial code
        const response = await fetch('https://aware-comfort-production.up.railway.app/api/trial/request', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData)
        });

        const result = await response.json();

        if (response.ok && result.access_code) {
          // Success - show message with code
          successDiv.classList.remove('hidden');
          document.getElementById('requestForm').reset();

          // Scroll to success message
          successDiv.scrollIntoView({ behavior: 'smooth' });
        } else {
          // Error from API
          errorMsg.textContent = result.error || 'Erro ao processar solicita√ß√£o. Tente novamente.';
          errorDiv.classList.remove('hidden');
        }
      } catch (error) {
        // Network or other error
        console.error('Error:', error);
        errorMsg.textContent = 'Erro de conex√£o. Verifique sua internet e tente novamente.';
        errorDiv.classList.remove('hidden');
      } finally {
        // Re-enable button
        submitBtn.disabled = false;
        submitBtn.innerHTML = 'üìß Enviar Solicita√ß√£o';
      }
    });

    // Auto-format access code input
    document.getElementById('accessCode').addEventListener('input', function(e) {
      let value = e.target.value.toUpperCase().replace(/[^A-Z0-9-]/g, '');

      // Auto-add hyphen
      if (value.length >= 4 && value.indexOf('-') === -1) {
        value = value.substring(0, 4) + '-' + value.substring(4);
      }

      e.target.value = value;
    });
  </script>

</body>
</html>
