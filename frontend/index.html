<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <meta name="description" content="NEPTUNO - Sistema Profissional de Plano de Desativa√ß√£o de Instala√ß√µes conforme ANP 817/2020. C√°lculo autom√°tico de custos, cronogramas e exporta√ß√£o para PDF.">
  <meta name="keywords" content="PDI, descomissionamento, ANP 817/2020, plano de desativa√ß√£o, √≥leo e g√°s, offshore, onshore">
  <meta name="author" content="NEPTUNO">
  <meta name="robots" content="index, follow">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="NEPTUNO - Sistema de Plano de Desativa√ß√£o de Instala√ß√µes">
  <meta property="og:description" content="Sistema profissional para elabora√ß√£o de PDI conforme ANP 817/2020 com c√°lculo autom√°tico de custos e cronogramas.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="./branding/NEPTUNO_LOGO.png">

  <title>NEPTUNO - Plano de Desativa√ß√£o de Instala√ß√µes</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="./branding/NEPTUNO_LOGO.png">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 and ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel Standalone for JSX transformation -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- jsPDF for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>

  <!-- Chart.js for graphics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background-color: #f8fafc;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #0a1929 0%, #1e3a5f 50%, #0f2847 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: white;
      transition: opacity 0.5s ease;
      overflow: hidden;
    }

    .loading-screen::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image:
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><defs><linearGradient id="water" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:%23001e3c;stop-opacity:1"/><stop offset="100%" style="stop-color:%23003d73;stop-opacity:1"/></linearGradient></defs><rect fill="url(%23water)" width="1200" height="400" y="200"/><ellipse cx="600" cy="200" rx="800" ry="40" fill="%23004d80" opacity="0.3"/><ellipse cx="600" cy="200" rx="600" ry="30" fill="%23005a99" opacity="0.2"/><g transform="translate(500, 50)"><rect x="0" y="50" width="200" height="120" fill="%23e63946" stroke="%23d62828" stroke-width="2"/><rect x="20" y="20" width="160" height="30" fill="%23ffb703"/><rect x="40" y="70" width="40" height="100" fill="%23606c38"/><rect x="120" y="70" width="40" height="100" fill="%23606c38"/><rect x="80" y="80" width="40" height="90" fill="%23283618"/><circle cx="100" cy="30" r="8" fill="%23fb8500"/><line x1="100" y1="170" x2="100" y2="240" stroke="%23606c38" stroke-width="8"/><line x1="60" y1="170" x2="40" y2="240" stroke="%23606c38" stroke-width="6"/><line x1="140" y1="170" x2="160" y2="240" stroke="%23606c38" stroke-width="6"/><path d="M 20 170 L 0 250 L 200 250 L 180 170 Z" fill="%23003d73" opacity="0.4"/><rect x="85" y="100" width="30" height="30" fill="%23f77f00"/><rect x="90" y="105" width="20" height="20" fill="%23fcbf49"/></g></svg>');
      background-size: cover;
      background-position: center;
      opacity: 0.15;
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .loading-content {
      position: relative;
      z-index: 1;
      text-align: center;
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.3);
      padding: 60px 80px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .loading-logo {
      font-size: 80px;
      margin-bottom: 24px;
      animation: pulse 2s ease-in-out infinite;
    }

    .loading-title {
      font-size: 42px;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: 2px;
    }

    .loading-subtitle {
      font-size: 18px;
      opacity: 0.9;
      margin-bottom: 48px;
      font-weight: 300;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }

    .loading-version {
      position: absolute;
      bottom: 40px;
      font-size: 14px;
      opacity: 0.7;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Scrollbar customization */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    /* Print styles */
    @media print {
      .no-print {
        display: none !important;
      }
    }

    /* Disclaimer Modal */
    .disclaimer-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.75);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 20px;
    }

    .disclaimer-content {
      background: white;
      border-radius: 12px;
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 32px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .disclaimer-content h2 {
      color: #dc2626;
      font-size: 24px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .disclaimer-content h3 {
      color: #1f2937;
      font-size: 16px;
      font-weight: 600;
      margin-top: 20px;
      margin-bottom: 10px;
    }

    .disclaimer-content ul {
      margin-left: 20px;
      margin-bottom: 16px;
      line-height: 1.7;
    }

    .disclaimer-content li {
      margin-bottom: 8px;
    }

    .disclaimer-checkbox {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 24px 0;
      padding: 16px;
      background: #fef3c7;
      border-radius: 8px;
      border: 2px solid #f59e0b;
    }

    .disclaimer-checkbox input {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }

    .disclaimer-checkbox label {
      font-weight: 600;
      cursor: pointer;
      user-select: none;
    }

    .disclaimer-button {
      width: 100%;
      padding: 14px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .disclaimer-button:hover:not(:disabled) {
      background: #1d4ed8;
    }

    .disclaimer-button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
    }

    /* WhatsApp Floating Button */
    .whatsapp-float {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #25d366;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .whatsapp-float:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(37, 211, 102, 0.6);
    }

    .whatsapp-float svg {
      width: 35px;
      height: 35px;
      fill: white;
    }

    .whatsapp-tooltip {
      position: absolute;
      right: 70px;
      background: #1f2937;
      color: white;
      padding: 8px 16px;
      border-radius: 6px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      font-size: 14px;
    }

    .whatsapp-float:hover .whatsapp-tooltip {
      opacity: 1;
    }
  </style>
</head>
<body>
  <noscript>
    <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
      <h1>JavaScript Necess√°rio</h1>
      <p>Esta aplica√ß√£o requer JavaScript para funcionar corretamente.</p>
      <p>Por favor, habilite o JavaScript no seu navegador e recarregue a p√°gina.</p>
    </div>
  </noscript>

  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <img src="./branding/NEPTUNO_LOGO.png" alt="NEPTUNO Logo" style="max-width: 400px; margin-bottom: 30px; filter: brightness(1.2);">
      <div style="font-size: 14px; opacity: 0.8; margin-bottom: 24px;">
        Sistema Profissional de Plano de Desativa√ß√£o de Instala√ß√µes
      </div>
      <div class="loading-spinner"></div>
    </div>
    <div class="loading-version">Vers√£o 2.1 | Machine Learning + ANP 817/2020</div>
  </div>

  <!-- App Root -->
  <div id="root"></div>

  <!-- Remove loading screen when app loads -->
  <script>
    window.addEventListener('load', function() {
      setTimeout(function() {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          setTimeout(function() {
            loadingScreen.style.display = 'none';
          }, 500);
        }
      }, 1500);
    });
  </script>

  <!-- PDI Calculations Module -->
  <script src="./PDICalculos.js"></script>

  <!-- PDI Machine Learning Module -->
  <script src="./PDICalculosML.js"></script>

  <!-- Main PDI Component -->
  <script type="text/babel" src="./PDIComponent.jsx"></script>

  <!-- App Entry Point -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    // PDIComponent j√° est√° dispon√≠vel
    const PDIComponent = window.PDIComponent;

    function App() {
      const [darkMode, setDarkMode] = useState(false);
      const [showDisclaimer, setShowDisclaimer] = useState(false);
      const [disclaimerAccepted, setDisclaimerAccepted] = useState(false);

      // Load preferences
      useEffect(() => {
        const savedDarkMode = localStorage.getItem('neptuno_darkMode');
        if (savedDarkMode !== null) {
          setDarkMode(JSON.parse(savedDarkMode));
        }

        const accepted = localStorage.getItem('neptuno_disclaimer_accepted');
        if (!accepted) {
          setShowDisclaimer(true);
        }
      }, []);

      // Save dark mode preference
      useEffect(() => {
        localStorage.setItem('neptuno_darkMode', JSON.stringify(darkMode));
        if (darkMode) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      }, [darkMode]);

      const handleAcceptDisclaimer = () => {
        if (disclaimerAccepted) {
          localStorage.setItem('neptuno_disclaimer_accepted', 'true');
          setShowDisclaimer(false);
        }
      };

      return (
        <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'}`}>
          {/* Disclaimer Modal */}
          {showDisclaimer && (
            <div className="disclaimer-modal">
              <div className="disclaimer-content">
                <h2>
                  <span>‚ö†Ô∏è</span>
                  TERMOS DE USO - NEPTUNO
                </h2>

                <h3>1. NATUREZA DO SISTEMA</h3>
                <p>O NEPTUNO √© uma <strong>FERRAMENTA DE AUX√çLIO</strong> para elabora√ß√£o de Plano de Desativa√ß√£o de Instala√ß√µes conforme ANP 817/2020.</p>

                <h3>2. LIMITA√á√ïES</h3>
                <ul>
                  <li>‚ùå <strong>N√ÉO substitui</strong> consultoria especializada</li>
                  <li>‚ùå <strong>N√ÉO garante</strong> aprova√ß√£o pela ANP</li>
                  <li>‚ùå C√°lculos s√£o <strong>ESTIMATIVAS</strong> baseadas em benchmarks p√∫blicos</li>
                  <li>‚ùå Usu√°rio deve <strong>validar todos os dados</strong></li>
                </ul>

                <h3>3. RESPONSABILIDADES</h3>
                <ul>
                  <li>‚úÖ Responsabilidade t√©cnica √© do <strong>ENGENHEIRO ASSINANTE</strong></li>
                  <li>‚úÖ <strong>ART</strong> (Anota√ß√£o de Responsabilidade T√©cnica) √© <strong>obrigat√≥ria</strong></li>
                  <li>‚úÖ Valida√ß√£o final deve ser feita por <strong>profissional habilitado (CREA)</strong></li>
                </ul>

                <h3>4. USO DOS DADOS</h3>
                <ul>
                  <li>‚úÖ Dados salvos <strong>apenas localmente</strong> (seu navegador)</li>
                  <li>‚úÖ <strong>N√£o coletamos</strong> ou armazenamos informa√ß√µes</li>
                  <li>‚úÖ 100% <strong>LGPD compliant</strong></li>
                </ul>

                <h3>5. GARANTIAS E LIMITA√á√ïES</h3>
                <ul>
                  <li>Sistema fornecido <strong>"AS IS"</strong> (como est√°)</li>
                  <li>Benchmarks baseados em fontes p√∫blicas confi√°veis (Wood Mackenzie, Rystad Energy, Petrobras)</li>
                  <li>N√£o garantimos precis√£o absoluta dos c√°lculos</li>
                  <li>Usu√°rio deve realizar <strong>due diligence</strong> pr√≥pria</li>
                </ul>

                <h3>6. SUPORTE E FEEDBACK</h3>
                <ul>
                  <li>üì± WhatsApp: (21) 96446-2281</li>
                  <li>üí¨ Use o bot√£o flutuante de WhatsApp para d√∫vidas ou sugest√µes</li>
                </ul>

                <div className="disclaimer-checkbox">
                  <input
                    type="checkbox"
                    id="accept-terms"
                    checked={disclaimerAccepted}
                    onChange={(e) => setDisclaimerAccepted(e.target.checked)}
                  />
                  <label htmlFor="accept-terms">
                    Li e concordo com os Termos de Uso acima
                  </label>
                </div>

                <button
                  className="disclaimer-button"
                  disabled={!disclaimerAccepted}
                  onClick={handleAcceptDisclaimer}
                >
                  {disclaimerAccepted ? 'Continuar para o Sistema' : 'Marque a caixa acima para continuar'}
                </button>
              </div>
            </div>
          )}

          {/* WhatsApp Floating Button */}
          <a
            href="https://wa.me/5521964462281?text=Ol√°!%20Estou%20usando%20o%20NEPTUNO%20e%20gostaria%20de%20tirar%20uma%20d√∫vida."
            target="_blank"
            rel="noopener noreferrer"
            className="whatsapp-float"
            title="Fale conosco no WhatsApp"
          >
            <span className="whatsapp-tooltip">üí¨ Feedback ou D√∫vidas?</span>
            <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0c-8.837 0-16 7.163-16 16 0 2.825 0.737 5.607 2.137 8.048l-2.137 7.952 7.933-2.127c2.42 1.37 5.173 2.127 8.067 2.127 8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 29.467c-2.482 0-4.908-0.646-7.07-1.87l-0.507-0.292-4.713 1.262 1.262-4.669-0.292-0.508c-1.207-2.100-1.847-4.507-1.847-6.957 0-7.384 6.083-13.467 13.467-13.467s13.467 6.083 13.467 13.467c0 7.384-6.083 13.467-13.467 13.467zM21.9 18.367c-0.292-0.146-1.73-0.854-2-0.951-0.271-0.098-0.469-0.146-0.666 0.146s-0.764 0.951-0.937 1.146c-0.173 0.195-0.346 0.22-0.638 0.073-0.292-0.146-1.232-0.454-2.346-1.446-0.867-0.772-1.453-1.725-1.624-2.017s-0.018-0.451 0.128-0.596c0.131-0.131 0.292-0.342 0.438-0.513s0.195-0.293 0.293-0.488c0.098-0.195 0.049-0.366-0.024-0.513s-0.666-1.604-0.913-2.197c-0.242-0.579-0.487-0.501-0.666-0.51-0.173-0.008-0.371-0.010-0.568-0.010s-0.52 0.073-0.791 0.366c-0.271 0.293-1.034 1.010-1.034 2.465s1.058 2.857 1.205 3.054c0.146 0.195 2.048 3.126 4.964 4.383 0.694 0.299 1.235 0.478 1.658 0.612 0.697 0.22 1.332 0.189 1.833 0.115 0.559-0.083 1.73-0.708 1.974-1.391s0.244-1.269 0.171-1.391c-0.073-0.122-0.271-0.195-0.568-0.342z"/>
            </svg>
          </a>
          {/* Header */}
          <header className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border-b sticky top-0 z-40 shadow-sm`}>
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
              <div className="flex items-center justify-between h-20">
                {/* Logo and Title */}
                <div className="flex items-center space-x-4">
                  <img src="./branding/NEPTUNO_LOGO.png" alt="NEPTUNO" style={{height: '50px'}} />
                </div>

                {/* Dark Mode Toggle */}
                <button
                  onClick={() => setDarkMode(!darkMode)}
                  className={`p-3 rounded-lg transition-all ${
                    darkMode
                      ? 'bg-gray-700 hover:bg-gray-600 text-yellow-400'
                      : 'bg-gray-100 hover:bg-gray-200 text-gray-700'
                  }`}
                  title={darkMode ? 'Modo Claro' : 'Modo Escuro'}
                >
                  <span className="text-2xl">{darkMode ? '‚òÄÔ∏è' : 'üåô'}</span>
                </button>
              </div>
            </div>
          </header>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            {PDIComponent && <PDIComponent darkMode={darkMode} />}
          </main>

          {/* Footer */}
          <footer className={`${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} border-t mt-16`}>
            <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
              <div className="text-center">
                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                  NEPTUNO ¬© 2025 | Sistema Profissional de Plano de Desativa√ß√£o
                </p>
                <p className={`text-xs mt-2 ${darkMode ? 'text-gray-500' : 'text-gray-500'}`}>
                  Conforme Resolu√ß√£o ANP 817/2020 | Vers√£o 2.1
                </p>
                <button
                  onClick={() => setShowDisclaimer(true)}
                  className={`text-xs mt-2 underline ${darkMode ? 'text-gray-400 hover:text-gray-300' : 'text-gray-500 hover:text-gray-700'}`}
                >
                  Ver Termos de Uso
                </button>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    // Render App
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

    // Hide loading screen after 3 seconds
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
          }, 500); // Wait for fade transition
        }
      }, 3000); // 3 seconds as requested
    });
  </script>
</body>
</html>
